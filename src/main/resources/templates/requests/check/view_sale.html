<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Edit sale</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/main.css" type="text/css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
</head>
<body>
<div th:insert="~{fragments/header :: head}"></div>

<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>


<!--<div th:if="${#authorization.expression('hasAuthority(''MANAGER'')')}" class="btn-group btn-group-justified">-->

<form id="sale" th:name="${upc}" th:value="${check_id}">
    <h2>Sale</h2>
    <p>Check number : </p>
    <p name="sale_ch_number"></p>
    <p>Upc : </p>
    <p name="sale_upc"></p>
    <p>Product name : </p>
    <p name="sale_pr_name"></p>
    <p>Product number : </p>
    <p name="sale_pr_number"></p>
    <p>Selling price : </p>
    <p name="sale_pr_price"></p>
</form>

<script>

    $(function() {
        var upc_id = document.getElementById("sale").getAttribute("name");
        var check_id = document.getElementById("sale").getAttribute("value");


        var data = {
            upc: upc_id,
            check_number: check_id
        };

        console.log(data)

        $.ajax({
            type: 'get',
            url: '/get_sale_with_name_by_upc_check_number',
            dataType: 'json',
            data: data,

            beforeSend: function (xhr) {
                xhr.setRequestHeader('Content-Type', 'application/json')
            },
            success: function (response) {
                console.log(response);
                $("input[name='sale_ch_number']").val(response.check_number);
                $("input[name='sale_upc']").val(response.upc);
                $("input[name='sale_pr_name']").val(response.product_name);

                $("input[name='sale_pr_number']").val(response.product_number);
                $("input[name='sale_pr_price']").val(response.selling_price);

            },
            error: function (err) {
                console.log(err);
            }
        });

    });


</script>


</body>
</html>

